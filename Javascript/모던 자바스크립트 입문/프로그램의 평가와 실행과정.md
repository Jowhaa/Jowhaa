## 프로그램의 평가와 실행 과정

### 실행가능한 코드
자바스크립트 엔진은 실행 가능한 코드를 만나면 그 코드를 평가해서 실행 문맥으로 만듭니다. 이 실행 가능한 코드의 유형은 다음과 같습니다.

- 전역 코드
- 함수 코드
- eval 코드

전역코드는 전역객체 Window 아래에 정의된 함수를 말하고, 함수 코드는 문자 그대로 함수를 말하며, eval코드는 eval 함수를 말합니다.
자바스크립트 엔진이 실행 가능한 코드의 유형을 분류하는 이유는 실행 문맥을 초기화하는 환경과 과정이 다르기 때문입니다. 특히 eval 코드는 앞으로 설명할 렉시컬환경이 아니라 별도의 동적 환경에서 실행됩니다.

### 실행 문맥의 구성
실행 문맥을 실행 가능한 코드가 실제로 실행되고 관리되는 영역이다. 실행에 필요한 모든 정보를 컴포넌트 여러 개가 나누어 관리하도록 되어있다.
그 중 가장 중요한 컴포넌트는 다음과 같다.

- 렉시컬 환경 컴포넌트
- 변수 환경 컴포넌트
- 디스 바인딩 컴포넌트

'렉시컬 환경 컴포넌트'와 '변수환경 컴포넌트'는 '렉시컬환경 타입'의 컴포넌트입니다. '렉시컬 환경 컴포넌트'와 '변수 환경 컴포넌트'는 타입이 같고 실제로 with문을 사용할 때를 제외하면 내부 값이 같아 똑같이 취급해도 무리가 없다.

'디스바인딩 컴포넌트'는 그 함수를 호출한 객체의 참조가 저장되는 곳입니다. 이것이 가리키는 값이 곧 해당 실행 문맥의 this가 됩니다.

### 렉시컬 환경 컴포넌트의 구성
'렉시컬환경 컴포넌트'는 자바스크립트 엔진이 자바스크립트 코드를 실행하기 위해 자원을 모아 둔 곳입니다. 구체적으로는 함수 또는 블록의 유효범위 안에 있는 식별자와 그 결과값이 저장되는 곳입니다. '렉시컬 환경 컴포넌트'는 '환경 레코드'와 '외부 렉시컬 환경 참조' 컴포넌트로 구성되어있습니다.

환경 레코드
환경 레코드는 유효 범위 안에 포함된 식별자를 기록하고 실행하는 영역으로 변수 객체와 매우 비슷한 역할을 합니다. 자바스크립트 엔진은 유효 범위 안의 식별자와 결과값을 바인드해서 환경 레코드에 기록합니다.

외부 렉시컬 환경 참조
자바스크립트는 함수 안에 함수를 중첨하여 정의할 수 있습니다. 따라서 자바스크립트 엔진은 유효 범위 너머의 유효범위도 검색할 수 있어야 합니다. '외부 렉시컬 환경 참조'에는 함수를 둘러싸고 있는 코드가 속한 '렉시컬 환경 컴포넌트의 참조'가 저장됩니다. 중첩된 함수 안에서 바깥 코드에 정의된 변수를 사용해야될 경우 자바스크립트 엔진은 외부 렉시컬 환경 참조를 따라 한 단계씩 그 변수를 검색합니다.

### 환경 레코드의 구성
'렉시컬 환경 컴포넌트'의 구성요소인 환경 레코드는 렉시컬 환경 안의 식별자와 그 식별자가 가리키는 값의 묶음이 실제로 저장되는 영역입니다. 환경레코드는 '선언적환경 레코드'와 '객체 환경 레코드'로 구성되어 있습니다.

선언적 환경 레코드는 실제로 함수와 변수,catch문의 식별자와 실행 결과가 저장되는 영역입니다.

객체 환경 레코드는 실행 문맥 외부에 별도로 저장된 객체의 참조에서 데이터를 읽거나 씁니다. 즉, with 문의 렉시컬 환경이나 전역 객체처럼 별도의 객체에 저장된 데이터는 그 객체가 가진 키와 값의 쌍을 복사해 오는 것이 아니라 그 객체 전체의 참조를 가져와 객체 환경 레코드의 'bindObject'라는 프로퍼티에 바인드 하도록 만들어져 있다.

